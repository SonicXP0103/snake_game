<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>è²ªé£Ÿè›‡ Snake Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>ğŸ è²ªé£Ÿè›‡</h1>
  
  <div id="app">
    <div id="gameContainer">
      <div id="scoreBoard">åˆ†æ•¸ï¼š{{ score }}</div>
      <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <div id="controlPanel">
      <button @click="startGame">é–‹å§‹éŠæˆ²</button>
      <button @click="resetGame">é‡æ–°é–‹å§‹</button>
    </div>
  </div>

<!-- âœ… Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <!-- âœ… Vue åˆå§‹åŒ– -->
  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {          
          score: 0,
          isInitialized: false,
          gameStatus: 0,
          // å…¶ä»–é‚„æ²’è½‰é€²ä¾†çš„è³‡æ–™æœƒé™¸çºŒåŠ å…¥
        };
      },
      methods: {
        startGame() {
          console.log("Vue: é–‹å§‹éŠæˆ²");
          this.score = 0;
          this.isInitialized = true;
          this.gameStatus = 1;
          // ç­‰ä¸‹æœƒæ¬ canvas çš„åˆå§‹åŒ–èˆ‡é‚è¼¯é€²ä¾†
        },
        resetGame() {
          console.log("Vue: é‡æ–°é–‹å§‹");
          this.score = 0;
          this.isInitialized = false;
          this.startGame(); // ç›´æ¥é‡å•Ÿ
        },

        // æ‰‹æ©Ÿç‰ˆèª¿æ•´ç•«å¸ƒå¤§å°
        resizeCanvasIfMobile()
        {
            const canvas = document.getElementById("gameCanvas");

            // æª¢æŸ¥æ˜¯å¦ç‚ºæ‰‹æ©Ÿç‰ˆ
            const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

            if (isMobile)
            {   
                console.log("æ‰‹æ©Ÿç‰ˆ");

                const size = Math.min(window.innerWidth, window.innerHeight) * 0.9;

                canvas.style.width = size + "px";
                canvas.style.height = size + "px";

                canvas.width = size;
                canvas.height = size;
            }
            else
            {
                console.log("é›»è…¦ç‰ˆ");

                // ğŸ’» é›»è…¦ç‰ˆä¿æŒå›ºå®šå°ºå¯¸
                canvas.style.width = "400px";
                canvas.style.height = "400px";

                canvas.width = 400;
                canvas.height = 400;
            }
        }        
      },
      mounted() {
          // å–å¾— canvas èˆ‡ç•«å¸ƒå…§å®¹
          const canvas = document.getElementById("gameCanvas");
          const ctx    = canvas.getContext("2d");

          // åˆå§‹åŒ–ç•«å¸ƒå¤§å°
          this.resizeCanvasIfMobile();

          // è¢å¹•å°ºå¯¸è®ŠåŒ–æ™‚ä¹Ÿè¦èª¿æ•´
          window.addEventListener("resize", this.resizeCanvasIfMobile);
      }
    }).mount('#app');
  </script>

  <!-- âœ… åŸæœ¬ JS æš«æ™‚ä¿ç•™ -->
  <!--<script src="script.js"></script>-->
  
</body>
</html>
