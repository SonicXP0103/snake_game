<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>貪食蛇 Snake Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>🐍 貪食蛇</h1>
  
  <div id="app">
    <div id="gameContainer">
      <div id="scoreBoard">分數：{{ score }}</div>
      <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <div id="controlPanel">
      <button @click="startGame">開始遊戲</button>
      <button @click="resetGame">重新開始</button>
    </div>
  </div>

<!-- ✅ Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <!-- ✅ Vue 初始化 -->
  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {          
          score: 0,
          isInitialized: false,
          gameStatus: 0,
          // 其他還沒轉進來的資料會陸續加入
        };
      },
      methods: {
        startGame() {
          console.log("Vue: 開始遊戲");
          this.score = 0;
          this.isInitialized = true;
          this.gameStatus = 1;
          // 等下會搬 canvas 的初始化與邏輯進來
        },
        resetGame() {
          console.log("Vue: 重新開始");
          this.score = 0;
          this.isInitialized = false;
          this.startGame(); // 直接重啟
        },

        // 手機版調整畫布大小
        resizeCanvasIfMobile()
        {
            const canvas = document.getElementById("gameCanvas");

            // 檢查是否為手機版
            const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

            if (isMobile)
            {   
                console.log("手機版");

                const size = Math.min(window.innerWidth, window.innerHeight) * 0.9;

                canvas.style.width = size + "px";
                canvas.style.height = size + "px";

                canvas.width = size;
                canvas.height = size;
            }
            else
            {
                console.log("電腦版");

                // 💻 電腦版保持固定尺寸
                canvas.style.width = "400px";
                canvas.style.height = "400px";

                canvas.width = 400;
                canvas.height = 400;
            }
        }        
      },
      mounted() {
          // 取得 canvas 與畫布內容
          const canvas = document.getElementById("gameCanvas");
          const ctx    = canvas.getContext("2d");

          // 初始化畫布大小
          this.resizeCanvasIfMobile();

          // 螢幕尺寸變化時也要調整
          window.addEventListener("resize", this.resizeCanvasIfMobile);
      }
    }).mount('#app');
  </script>

  <!-- ✅ 原本 JS 暫時保留 -->
  <!--<script src="script.js"></script>-->
  
</body>
</html>
